name: Verify Required Secrets

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  verify-secrets:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Verify LLM API Token Secret
        env:
          LLM_API_TOKEN: ${{ secrets.LLM_API_TOKEN }}
        run: |
          echo "Checking for required secrets..."
          
          if [ -z "$LLM_API_TOKEN" ]; then
            echo "❌ ERROR: LLM_API_TOKEN secret is not set or is empty"
            echo "Please ensure the LLM_API_TOKEN secret is configured in the repository settings."
            echo "Go to: Settings > Secrets and variables > Actions > Repository secrets"
            exit 1
          else
            echo "✅ SUCCESS: LLM_API_TOKEN secret is present"
            echo "Secret length: ${#LLM_API_TOKEN} characters"
          fi

      - name: Summary
        if: success()
        run: |
          echo "🎉 All required secrets are properly configured!"
          echo "This pull request can proceed with the confidence that required secrets are available."
